---
title: Project Euler 786
tags:
  - Project Euler
mathjax: true
---
<escape><!-- more --></escape>
    
# Project Euler 786
## 题目
### Billiard


The following diagram shows a billiard table of a special quadrilateral shape.
The four angles $A, B, C, D$ are $120^\circ, 90^\circ, 60^\circ, 90^\circ$ respectively, and the lengths $AB$ and $AD$ are equal.


<div style="text-align:center;">
<img src="project/images/p786_billiard_shape.jpg" class="dark_img" alt="" height="160" />
</div>


The diagram on the left shows the trace of an infinitesimally small billiard ball, departing from point $A$, bouncing twice on the edges of the table, and finally returning back to point $A$. The diagram on the right shows another such trace, but this time bouncing eight times:


<div style="text-align:center;">
<img src="project/images/p786_billiard_traces.jpg" class="dark_img" alt="" height="160" />
</div>


The table has no friction and all bounces are perfect elastic collisions.<br />
Note that no bounce should happen on any of the corners, as the behaviour would be unpredictable.



Let $B(N)$ be the number of possible traces of the ball, departing from point $A$, bouncing at most $N$ times on the edges and returning back to point $A$.



For example, $B(10) = 6$, $B(100) = 478$, $B(1000) = 45790$.



Find $B(10^9)$.



## 解决方案


## 代码


