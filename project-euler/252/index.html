<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 8.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"ujimatsu-chiya.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.26.0","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"vs","dark":"vs2015"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":false,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta property="og:type" content="article">
<meta property="og:title" content="Project Euler 252">
<meta property="og:url" content="https://ujimatsu-chiya.github.io/project-euler/252/index.html">
<meta property="og:site_name" content="Ujimatsu Chiya">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ujimatsu-chiya.github.io/project-euler/images/p252_convexhole.gif">
<meta property="og:image" content="https://ujimatsu-chiya.github.io/project-euler/images/p252-1.png">
<meta property="og:image" content="https://ujimatsu-chiya.github.io/project-euler/images/p252-2.png">
<meta property="article:published_time" content="2022-07-04T10:02:42.000Z">
<meta property="article:modified_time" content="2025-12-23T05:14:07.259Z">
<meta property="article:author" content="Ujimatsu Chiya">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ujimatsu-chiya.github.io/project-euler/images/p252_convexhole.gif">


<link rel="canonical" href="https://ujimatsu-chiya.github.io/project-euler/252/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://ujimatsu-chiya.github.io/project-euler/252/","path":"project-euler/252/","title":"Project Euler 252"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Project Euler 252 | Ujimatsu Chiya</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js" defer></script>
  <script async src="https://hm.baidu.com/hm.js?b51c0caaa35b7e7749207556edb4b772"></script>







  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.5.0/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>




  <script src="/js/third-party/fancybox.js" defer></script>



  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js" defer></script>




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Ujimatsu Chiya</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-project-euler"><a href="/project-euler/" rel="section"><i class="fa fa-align-justify fa-fw"></i>Project Euler</a></li><li class="menu-item menu-item-算法导论"><a href="/introduction-to-algorithms/" rel="section"><i class="fa-solid fa-question fa-fw"></i>算法导论</a></li><li class="menu-item menu-item-友情链接"><a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友情链接</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#project-euler-252"><span class="nav-number">1.</span> <span class="nav-text">Project Euler 252</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE"><span class="nav-number">1.1.</span> <span class="nav-text">题目</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#convex-holes"><span class="nav-number">1.1.1.</span> <span class="nav-text">Convex Holes</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="nav-number">1.2.</span> <span class="nav-text">解决方案</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81"><span class="nav-number">1.3.</span> <span class="nav-text">代码</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ujimatsu Chiya"
      src="/images/chiya.png">
  <p class="site-author-name" itemprop="name">Ujimatsu Chiya</p>
  <div class="site-description" itemprop="description">Ujimatsu Chiya 的博客还在建造当中，什么都会整一些上来哦</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">681</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Ujimatsu-Chiya" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Ujimatsu-Chiya" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://leetcode.cn/u/ujimatsu_chiya/" title="Leetcode → https:&#x2F;&#x2F;leetcode.cn&#x2F;u&#x2F;ujimatsu_chiya&#x2F;" rel="noopener me" target="_blank"><i class="fa custom leetcode fa-fw"></i>Leetcode</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.xiaohongshu.com/user/profile/6423968900000000110225fd" title="Xiaohongshu → https:&#x2F;&#x2F;www.xiaohongshu.com&#x2F;user&#x2F;profile&#x2F;6423968900000000110225fd" rel="noopener me" target="_blank"><i class="fa custom xiaohongshu fa-fw"></i>Xiaohongshu</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ujimatsu-chiya.github.io/project-euler/252/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/chiya.png">
      <meta itemprop="name" content="Ujimatsu Chiya">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ujimatsu Chiya">
      <meta itemprop="description" content="Ujimatsu Chiya 的博客还在建造当中，什么都会整一些上来哦">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Project Euler 252 | Ujimatsu Chiya">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Project Euler 252
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-04 18:02:42" itemprop="dateCreated datePublished" datetime="2022-07-04T18:02:42+08:00">2022-07-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-12-23 13:14:07" itemprop="dateModified" datetime="2025-12-23T13:14:07+08:00">2025-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Project-Euler/" itemprop="url" rel="index"><span itemprop="name">Project Euler</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p><escape><span id="more"></span></escape></p>
<h1 id="project-euler-252">Project Euler 252</h1>
<h2 id="题目">题目</h2>
<h3 id="convex-holes">Convex Holes</h3>
<p>Given a set of points on a plane, we define a convex hole to be a
convex polygon having as vertices any of the given points and not
containing any of the given points in its interior (in addition to the
vertices, other given points may lie on the perimeter of the
polygon).</p>
<p>As an example, the image below shows a set of twenty points and a few
such convex holes. The convex hole shown as a red heptagon has an area
equal to <span class="math inline">\(1049694.5\)</span> square units,
which is the highest possible area for a convex hole on the given set of
points.</p>
<p><img data-src="../images/p252_convexhole.gif" /></p>
<p>For our example, we used the first <span
class="math inline">\(20\)</span> points <span
class="math inline">\((T_{2k−1},T_{2k})\)</span>, for <span
class="math inline">\(k=1,2,\dots,20\)</span>, produced with the
pseudo-random number generator:</p>
<p><span class="math inline">\(\begin{aligned}
S_0&amp;=290797\\
S_{n+1}&amp;=S_n^2 \text{ mod } 50515093\\
T_n&amp;=(S_n \bmod 2000)-1000
\end{aligned}\)</span></p>
<p><em>i.e.</em> <span class="math inline">\((527,144), (−488,732),
(−454,−947), \dots\)</span></p>
<p>What is the maximum area for a convex hole on the set containing the
first <span class="math inline">\(500\)</span> points in the
pseudo-random sequence?</p>
<p>Specify your answer including one digit after the decimal point.</p>
<h2 id="解决方案">解决方案</h2>
<p>本题将尝试找到所有的凸空洞，并且求出它们的最大值。为了减少程序运行时间，我们尽量减少凸空洞的重复寻找次数，采取的措施是：枚举图中的每一个点<span
class="math inline">\(A(x_i,y_i)\)</span>作为整个坐标系的原点，将满足这些条件的点<span
class="math inline">\((x_j,y_j)\)</span>舍去：<span
class="math inline">\(y_j&lt;y_i\lor (y_j=y_i \and
x_j&lt;x_i)\)</span>.那么剩下的这些点中，<span
class="math inline">\(A\)</span>是最下方的，考虑以<span
class="math inline">\(A\)</span>为空洞的一个特定点进行枚举。</p>
<p>那么，将所有的点都按照极角进行排序。考虑如下图的形式，主要思想是从逆时针方向起找到一个个三角形，这些三角形合并后恰好形成一个凸包。</p>
<p><img data-src="../images/p252-1.png" /></p>
<p>假设当前一共有<span
class="math inline">\(m\)</span>个点，这些点极角排序后，分别标记成<span
class="math inline">\(B_1,B_2,\dots,B_m\)</span>。</p>
<p>考虑状态<span class="math inline">\(f(i,j)(1\le j&lt; i\le
m)\)</span>表示逆时针方向上，以<span class="math inline">\(\triangle
AB_iB_j\)</span>为最后一个三角形的凸包中，最大的面积值。需要注意的是，不存在其它点<span
class="math inline">\(B_k\)</span>使得<span
class="math inline">\(B_k\)</span>落在<span
class="math inline">\(\triangle
AB_iB_j\)</span>的<strong>内部</strong>（不包括边界）时，并且<span
class="math inline">\(O,B_i,B_j\)</span>不共线时，<span
class="math inline">\(f(i,j)\)</span>才是一个合法状态。对于所有不合法的状态，状态值<span
class="math inline">\(f\)</span>为<span
class="math inline">\(0\)</span>。</p>
<p>那么，<span
class="math inline">\(f\)</span>的状态转移方程就可以写成如下形式：</p>
<p><span class="math display">\[f(i,j)=\max(S_{\triangle
AB_iB_j},\max_{k&lt;j,\overrightarrow{B_jB_i}\times\overrightarrow{B_jB_k}&gt;0}\{f(j,k)+S_{\triangle
AB_iB_j}\})\]</span></p>
<p>只要点<span class="math inline">\(B_k\)</span>在向量<span
class="math inline">\(\overrightarrow{B_jB_i}\)</span>的左侧，从而<span
class="math inline">\(B_i,B_j,B_k\)</span>形成一个凸形。那么状态<span
class="math inline">\(f(j,k)\)</span>所代表的凸包和<span
class="math inline">\(\triangle
AB_iB_j\)</span>合并形成了一个新凸包。</p>
<p>在枚举<span
class="math inline">\(i\)</span>时，需要先顺时针找到第一个<span
class="math inline">\(j\)</span>，使得<span
class="math inline">\(O,B_i,B_j\)</span>先不共线。然后找到所有的<span
class="math inline">\(k\)</span>使得<span
class="math inline">\(\overrightarrow{B_jB_i}\times\overrightarrow{B_jB_k}&gt;0\)</span>，然后直接进行转移。如果直接这样子实现，那么每次枚举一个原点，就需要<span
class="math inline">\(O(n^3)\)</span>的转移，总体时间复杂度为<span
class="math inline">\(O(n^4)\)</span>.</p>
<p>考虑如此进行：如果我们已经确定了<span
class="math inline">\(f(i,j)\)</span>是一个合法状态，那么接下来就去寻找<span
class="math inline">\(k\)</span>，使得<span
class="math inline">\(f(j,k)\)</span>也是一个合法状态。如果找到一个最大的<span
class="math inline">\(k_0\)</span>使得<span
class="math inline">\(\overrightarrow{B_jB_i}\times\overrightarrow{B_jB_{k_0}}&gt;0\)</span>，那么对于<span
class="math inline">\(k=k_0+1,k_0+2,\dots,j-1,\overrightarrow{B_jB_i}\times\overrightarrow{B_jB_{k}}&lt;0\)</span>都成立，也就是说，<span
class="math inline">\(B_j\)</span>在<span
class="math inline">\(\triangle OB_iB_k\)</span>内部，那么<span
class="math inline">\(f(i,k)\)</span>都不是合法的，其都值为<span
class="math inline">\(0\)</span>，如下图所示。</p>
<p><img data-src="../images/p252-2.png" /></p>
<p>对于所有状态<span class="math inline">\(1\le k&#39;\le
k_0\)</span>，有以下说法：</p>
<ol type="1">
<li><span class="math inline">\(B_{k&#39;}\)</span>在向量<span
class="math inline">\(\overrightarrow{B_iB_{j}}\)</span>左侧，它们都是不合法的，因为<span
class="math inline">\(B_j\)</span>在<span
class="math inline">\(\triangle AB_iB_k\)</span>内部。</li>
<li>其余情况都可以进行转移。</li>
</ol>
<p>那么状态转移方程就可以改写成：</p>
<p><span class="math display">\[f(i,j)=\max(S_{\triangle
AB_iB_j},\max_{k=1}^{k_0}\{f(j,k)+S_{\triangle AB_iB_j}\})\]</span></p>
<p>通过数据结构维护，这个递推式可以通过<span
class="math inline">\(O(n^2)\)</span>求出来。</p>
<p>这个思路还提供了一种快速找到合法状态的方案：对于一个状态<span
class="math inline">\(f(i,j)\)</span>，计算出来了<span
class="math inline">\(k_0\)</span>后，这个<span
class="math inline">\(k_0\)</span>将作为下一次求解的<span
class="math inline">\(j\)</span>。</p>
<p>另外，对于任意两点<span class="math inline">\(B_i,B_j,S_{\triangle
AB_i,B_j}=|\overrightarrow{AB_i}\times\overrightarrow{AB_j}|\)</span>.</p>
<p>最终答案为<span class="math inline">\(\displaystyle{\max_{1\le j\le
i\le m}\{f(i,j)\}}\)</span>.</p>
<h2 id="代码">代码</h2>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">500</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">P</span> &#123;</span><br><span class="line">    ll x, y;</span><br><span class="line">    <span class="type">double</span> rad;</span><br><span class="line">    <span class="built_in">P</span>(ll xx=<span class="number">0</span>,ll yy=<span class="number">0</span>):<span class="built_in">x</span>(xx),<span class="built_in">y</span>(yy),<span class="built_in">rad</span>(<span class="built_in">atan2</span>(y,x))&#123;&#125;</span><br><span class="line">    <span class="comment">// 向量减法</span></span><br><span class="line">    P <span class="keyword">operator</span>-(P p) <span class="type">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">P</span>(x-p.x,y-p.y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 向量叉积</span></span><br><span class="line">    ll <span class="keyword">operator</span>^(P p) <span class="type">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x*p.y-y*p.x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 极角排序用</span></span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (P p) <span class="type">const</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> rad&lt;p.rad;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;p[N<span class="number">+4</span>];</span><br><span class="line"><span class="type">int</span> T[N+N<span class="number">+4</span>];</span><br><span class="line"><span class="type">int</span> mx=<span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> f[N<span class="number">+4</span>][N<span class="number">+4</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(vector&lt;P&gt;&amp;v)</span></span>&#123;</span><br><span class="line">    <span class="built_in">sort</span>(v.<span class="built_in">begin</span>(),v.<span class="built_in">end</span>());</span><br><span class="line">    <span class="type">int</span> m=v.<span class="built_in">size</span>();</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,j;i&lt;m;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(j=i<span class="number">-1</span>;j&gt;=<span class="number">0</span>&amp;&amp;(v[i]^v[j])==<span class="number">0</span>;j--);</span><br><span class="line">        <span class="type">bool</span> ok=(j==i<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> k;j&gt;=<span class="number">0</span>;)&#123;</span><br><span class="line">            <span class="keyword">for</span>(k=j<span class="number">-1</span>;k&gt;=<span class="number">0</span>&amp;&amp;((v[i]-v[j])^(v[k]-v[j]))&lt;<span class="number">0</span>;k--);</span><br><span class="line">            <span class="type">int</span> s=<span class="built_in">abs</span>(v[i]^v[j]);</span><br><span class="line">            <span class="keyword">if</span>(k&gt;=<span class="number">0</span>) s+=f[j][k];</span><br><span class="line">            <span class="keyword">if</span>(ok) f[i][j]=s;</span><br><span class="line">            mx=<span class="built_in">max</span>(mx,s);</span><br><span class="line">            j=k;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ok)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;i;j++)</span><br><span class="line">                f[i][j]=<span class="built_in">max</span>(f[i][j],f[i][j<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    T[<span class="number">0</span>]=<span class="number">290797</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=N+N<span class="number">+1</span>;i++)</span><br><span class="line">        T[i]=<span class="number">1ll</span>*T[i<span class="number">-1</span>]*T[i<span class="number">-1</span>]%<span class="number">50515093</span>,T[i<span class="number">-1</span>]=T[i<span class="number">-1</span>]%<span class="number">2000</span><span class="number">-1000</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=N;i++)</span><br><span class="line">        p[i]=<span class="built_in">P</span>(T[<span class="number">2</span>*i<span class="number">-1</span>],T[<span class="number">2</span>*i]);</span><br><span class="line">    vector&lt;P&gt;z;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">        z.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=N;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(p[j].y&gt;p[i].y||p[j].y==p[i].y&amp;&amp;p[j].x&gt;p[i].x)</span><br><span class="line">                z.<span class="built_in">push_back</span>(p[j]-p[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">solve</span>(z);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">double</span> ans=<span class="number">0.5</span>*mx;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.1f\n&quot;</span>,ans);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="Ujimatsu Chiya 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.png" alt="Ujimatsu Chiya 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Ujimatsu Chiya
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://ujimatsu-chiya.github.io/project-euler/252/" title="Project Euler 252">https://ujimatsu-chiya.github.io/project-euler/252/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


        

    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2022 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Ujimatsu Chiya</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">1.3m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">19:52</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div><!-- 页面动态线条-->
<script color="0,0,255" opacity="0.5" zIndex="-1" count="99" src="https://lib.baomitu.com/canvas-nest.js/1.0.1/canvas-nest.js"></script>
<!-- 页面点击小红心
<script type="text/javascript" src="/js/click-love.js" />-->

<span id="sitetime"></span>
<script language=javascript>
function siteTime(){
    window.setTimeout("siteTime()", 1000);
    let seconds = 1000;
    let minutes = seconds * 60;
    let hours = minutes * 60;
    let days = hours * 24;
    let years = days * 365;
    let create_day = new Date("2022-03-25T13:14:23Z");
    let today = new Date();
    let awesome = "<i class=\"fa-solid fa-clock\"></i> "

    let diff = today-create_day;
    let diffSeconds = Math.floor(diff/seconds%60);
    let diffMinutes = Math.floor(diff/minutes%60);
    let diffHours = Math.floor(diff/hours%24);
    let diffDays = Math.floor(diff/days%365);
    let diffYears = Math.floor(diff/years);

    document.getElementById("sitetime").innerHTML=`自 ${create_day.getFullYear()} 年 ${create_day.getMonth() + 1} 月 ${create_day.getDate()} 日建立以来，本网站已运行： ${awesome} ${diffYears} 年 ${diffDays} 天 ${diffHours} 时 ${diffMinutes} 分 ${diffSeconds} 秒`;
}
siteTime();
</script>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"Ujimatsu-Chiya/Ujimatsu-Chiya.github.io-comment","issue_term":"pathname","theme":"github-light","crossorigin":"anonymous"}</script>
<script src="/js/third-party/comments/utterances.js" defer></script>

</body>
</html>
